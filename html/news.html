<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#f0f0f0">
    <title>Festival Program</title>
    <link rel="stylesheet" href="../css/styles.css">
    <script src="../js/filters.js" defer></script>
</head>

<body>
    <div class="navigation">
        <div class="menu">
            <nav>
                <ul>
                    <li><a href="index.html">Index</a></li>
                    <li><a href="news.html">News</a></li>
                    <li><a href="#">Community</a></li>
                    <li><a href="#">Tickets</a></li>
                </ul>
            </nav>
        </div>

        <div class="filters"></div>

        <div class="news-tab">
            <h1>Featured Stories</h1>
            <div class="featured-stories" id="featured-stories"></div>
            
            <h1>All News</h1>
            <div class="all-news" id="all-news"></div>
        </div>
    </div>

    <script>
document.addEventListener("DOMContentLoaded", function() {
    // Get the current URL path without the leading '/'
    const currentPath = window.location.pathname.split('/').pop();

    // Select all menu links
    const menuLinks = document.querySelectorAll('.menu nav ul li a');

    // Loop through the menu links and add the "active" class to the matching link
    menuLinks.forEach(link => {
        if (link.getAttribute('href') === currentPath) {
            link.classList.add('active');
        }
    });

    // Fetch news articles from JSON file
    fetch('../content/news.json') // Adjust the path to your JSON file as needed
        .then(response => response.json())
        .then(data => {
            const featuredContainer = document.getElementById('featured-stories');
            const allNewsContainer = document.getElementById('all-news');

            data.forEach(article => {
                const card = document.createElement('div');
                card.className = 'card';
                card.id = article.id;

                // Replace newline characters with <br>
                const contentHtml = article.content.replace(/\n/g, '<br>');

                card.innerHTML = `
                    <img src="${article.image}" alt="${article.title}">
                    <div class="card-bg">
                        <h2>${article.title}</h2>
                        <div class="info">
                            <span class="date">${article.date}</span>
                            <span class="tag">${article.tag}</span>
                        </div>
                        <div class="card-content">
                            <span class="content">${contentHtml}</span>
                        </div>
                    </div>
                    <div class="buttons">
                        <button class="share" onclick="window.open('${article.share_url}', '_blank')">Share</button>
                        <button class="read-more" onclick="window.location.href='${article.read_more_url}'">Read more â†’</button>
                    </div>
                `;

                if (article.isFeatured) {
                    featuredContainer.appendChild(card);
                } else {
                    allNewsContainer.appendChild(card);
                }
            });
        })
        .catch(error => console.error('Error loading news articles:', error));
});
    </script>
</body>
</html>
